{"is_source_file": true, "format": "TypeScript", "description": "This file defines Express.js routes related to user authentication, including signup, login, logout, and user info retrieval. It integrates middleware for authentication, uses Joi for validation, and interacts with auth service functions.", "external_files": ["../middleware/clerkAuth.js", "../middleware/auth.js", "../services/authService.js", "../utils/debug.js", "../config/env.js"], "external_methods": ["clerkAuthMiddleware", "legacyJwtAuthMiddleware", "login", "signup", "debugLog", "debugError", "logMongoStatus", "getEnv"], "published": ["router"], "classes": [], "methods": [{"name": "POST /signup", "description": "Handles user signup; only active if LOCAL_JWT_AUTH is true. Validates request body, invokes signup service, and manages error handling."}, {"name": "POST /login", "description": "Handles user login; only active if LOCAL_JWT_AUTH is true. Validates credentials and invokes login service."}, {"name": "GET /me", "description": "Retrieves current user info based on Clerk token, using middleware to verify authentication."}], "calls": ["signup(value)", "login(value)", "logMongoStatus('auth:signup')", "logMongoStatus('auth:login')", "debugLog(...)", "debugError(...)"], "search-terms": ["auth router", "signup route", "login route", "user info retrieval", "middleware/auth", "Joi validation", "clerk authentication"], "state": 2, "file_id": 28, "knowledge_revision": 194, "git_revision": "8c44a623530d939e009ba26df3a53d41f287a1db", "revision_history": [{"60": ""}, {"114": "6241b6678d4ba4937d8c14a0c734b886660ccbf2"}, {"117": "4efa6797c91bc288cd6ce83425f37f84e758ce67"}, {"142": "165f8da04793b3a966670fe5bebb1452e0132553"}, {"194": "8c44a623530d939e009ba26df3a53d41f287a1db"}], "ctags": [{"_type": "tag", "name": "LOCAL_JWT_AUTH", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/auth.ts", "pattern": "/^const { LOCAL_JWT_AUTH } = getEnv();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/auth.ts", "pattern": "/^  const { error, value } = schema.validate(req.body);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/auth.ts", "pattern": "/^    const result = await login(value);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/auth.ts", "pattern": "/^    const result = await signup(value);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/auth.ts", "pattern": "/^const router = Router();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "schema", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/auth.ts", "pattern": "/^  const schema = Joi.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/auth.ts", "pattern": "/^  const user = req.user!;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/auth.ts", "pattern": "/^  const { error, value } = schema.validate(req.body);$/", "language": "TypeScript", "kind": "constant"}], "hash": "1ddd4225a09146f8f61c151f41d5fc30", "format-version": 4, "code-base-name": "frontend_dashboard", "filename": "backend_api/src/routes/auth.ts"}