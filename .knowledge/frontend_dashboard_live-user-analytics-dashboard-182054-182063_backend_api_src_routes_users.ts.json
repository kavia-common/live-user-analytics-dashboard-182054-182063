{"is_source_file": true, "format": "TypeScript", "description": "This source file defines the route handlers for '/users' endpoints in an Express.js application. It includes endpoints for listing users (GET) and updating user roles (PATCH), utilizing middleware for authentication and role authorization, as well as input validation with Joi.", "external_files": ["../middleware/auth.js", "../middleware/clerkAuth.js", "../services/userService.js"], "external_methods": ["requireRole", "clerkAuthMiddleware", "listUsers", "updateUserRole"], "published": ["router"], "classes": [], "methods": [{"name": "GET /", "description": "Handler for listing users with pagination, accessible only by admins."}, {"name": "PATCH /:id/role", "description": "Handler for updating a user's role, accessible only by admins."}], "calls": ["listUsers(page, limit)", "updateUserRole(req.params.id, value.role)"], "search-terms": ["users route", "user listing endpoint", "update user role", "express router", "middleware auth", "Joi validation", "clerkAuthMiddleware", "requireRole"], "state": 2, "file_id": 64, "knowledge_revision": 174, "git_revision": "", "ctags": [{"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "pattern": "/^  const { error, value } = schema.validate(req.body);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "limit", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "pattern": "/^  const limit = parseInt((req.query.limit as string) || '20', 10);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "page", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "pattern": "/^  const page = parseInt((req.query.page as string) || '1', 10);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "pattern": "/^  const result = await listUsers(page, limit);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "pattern": "/^const router = Router();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "schema", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "pattern": "/^  const schema = Joi.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "pattern": "/^    const updated = await updateUserRole(req.params.id, value.role);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "pattern": "/^  const { error, value } = schema.validate(req.body);$/", "language": "TypeScript", "kind": "constant"}], "hash": "9d584bd0d0d027945a0e5e5b6a23479c", "format-version": 4, "code-base-name": "frontend_dashboard", "filename": "frontend_dashboard/live-user-analytics-dashboard-182054-182063/backend_api/src/routes/users.ts", "revision_history": [{"174": ""}]}