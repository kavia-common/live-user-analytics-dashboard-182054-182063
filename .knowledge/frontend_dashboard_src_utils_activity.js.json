{"is_source_file": true, "format": "JavaScript", "description": "This source file contains utility functions for tracking user activity such as page views, logins, and session events in a web application. It handles composing activity data, posting it to an API endpoint, and managing request state and error suppression logic.", "external_files": ["../api/client", "./device"], "external_methods": ["apiClient.post", "parseUserAgent", "getLocationHints"], "published": ["postActivity", "buildMetadata", "trackPageView", "trackSessionStart", "trackSessionEnd", "trackLogin"], "classes": [], "methods": [{"name": "postActivity(payload)", "description": "Send an activity payload to the backend API, handling request state, suppressing requests after errors, and logging for non-production environments.", "scope": "", "scopeKind": ""}, {"name": "buildMetadata(pathname = (typeof window !== 'undefined' ? window.location.pathname : '/'))", "description": "Construct metadata for activity tracking, including current path, referrer, device info parsed from user agent, and location hints.", "scope": "", "scopeKind": ""}, {"name": "trackPageView(pathname = (typeof window !== 'undefined' ? window.location.pathname : '/'))", "description": "Debounced function to track page view activities on route changes, avoiding duplicate event tracking for the same path.", "scope": "", "scopeKind": ""}, {"name": "trackSessionStart()", "description": "Posts a session start activity to the backend.", "scope": "", "scopeKind": ""}, {"name": "trackSessionEnd()", "description": "Posts a session end activity to the backend.", "scope": "", "scopeKind": ""}, {"name": "trackLogin()", "description": "Posts a login activity to the backend.", "scope": "", "scopeKind": ""}], "calls": ["apiClient.post", "parseUserAgent", "getLocationHints", "postActivity"], "search-terms": ["activity tracking", "page view debounce", "user activity", "session management", "user agent parsing", "location hints", "activity API"], "state": 2, "file_id": 85, "knowledge_revision": 424, "git_revision": "ecddbfbe1951bcdecf79d9d660529908d676045d", "revision_history": [{"266": ""}, {"289": "d3a01222f86f38f4ab6741c5334a11af55b3ff49"}, {"306": "d3a01222f86f38f4ab6741c5334a11af55b3ff49"}, {"373": "54506ed131392e993e54a2993c4f685a89372264"}, {"382": "01950936557152710dceff936b10434a2806d6bb"}, {"424": "ecddbfbe1951bcdecf79d9d660529908d676045d"}], "ctags": [{"_type": "tag", "name": "SUPPRESS_MS_ON_ERROR", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^const SUPPRESS_MS_ON_ERROR = 10000; \\/\\/ cooldown after 401\\/5xx$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "buildMetadata", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^export function buildMetadata(pathname = (typeof window !== 'undefined' ? window.location.pathna/", "language": "JavaScript", "kind": "function", "signature": "(pathname = (typeof window !== 'undefined' ? window.location.pathname : '/'))"}, {"_type": "tag", "name": "inFlight", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^let inFlight = false;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "lastPathname", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^let lastPathname = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "pageViewTimer", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^let pageViewTimer = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "postActivity", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^export async function postActivity(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}, {"_type": "tag", "name": "suppressedUntil", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^let suppressedUntil = 0;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "trackLogin", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^export function trackLogin() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "trackPageView", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^export function trackPageView(pathname = (typeof window !== 'undefined' ? window.location.pathna/", "language": "JavaScript", "kind": "function", "signature": "(pathname = (typeof window !== 'undefined' ? window.location.pathname : '/'))"}, {"_type": "tag", "name": "trackSessionEnd", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^export function trackSessionEnd() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "trackSessionStart", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/frontend_dashboard/src/utils/activity.js", "pattern": "/^export function trackSessionStart() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "9eaeb526c7a3039e9f0b13c0578ff90d", "format-version": 4, "code-base-name": "frontend_dashboard", "filename": "frontend_dashboard/src/utils/activity.js", "fields": [{"name": "let inFlight = false;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let lastPathname = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let pageViewTimer = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let suppressedUntil = 0;", "scope": "", "scopeKind": "", "description": "unavailable"}]}