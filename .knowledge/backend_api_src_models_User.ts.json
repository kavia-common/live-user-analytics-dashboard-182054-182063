{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Mongoose schema and model for user accounts, including fields like email, passwordHash, role, and timestamps. It includes methods for comparing passwords and a helper function for creating a user with hashed password.", "external_files": ["../utils/debug.js"], "external_methods": ["debugLog", "debugError", "bcrypt.compare", "bcrypt.hash"], "published": ["createUserWithPassword", "User"], "classes": [{"name": "IUser", "description": "TypeScript interface extending Mongoose Document, representing a user with properties like email, passwordHash, role, and timestamps, and a method for password comparison."}], "methods": [{"name": "comparePassword(plain: string): Promise<boolean>; comparePassword", "description": "Instance method to compare a plaintext password with the stored password hash using bcrypt.", "scope": "IUser", "scopeKind": "interface"}, {"name": "export async function createUserWithPassword( createUserWithPassword", "description": "Asynchronous function to create and save a new user document with a hashed password.", "scope": "", "scopeKind": ""}], "calls": ["bcrypt.compare", "bcrypt.hash", "User.prototype.save"], "search-terms": ["mongoose schema User", "password comparison", "createUserWithPassword", "password hashing", "UserRole type"], "state": 2, "file_id": 17, "knowledge_revision": 120, "git_revision": "cd50f24f87ad2d52adf350a2dbfd31ff18128267", "revision_history": [{"35": ""}, {"120": "cd50f24f87ad2d52adf350a2dbfd31ff18128267"}], "ctags": [{"_type": "tag", "name": "IUser", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^export interface IUser extends Document {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^export const User: Model<IUser> =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "UserRole", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^export type UserRole = 'admin' | 'user';$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "UserSchema", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^const UserSchema = new Schema<IUser>($/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "comparePassword", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  comparePassword(plain: string): Promise<boolean>;$/", "language": "TypeScript", "kind": "method", "scope": "IUser", "scopeKind": "interface"}, {"_type": "tag", "name": "createUserWithPassword", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^export async function createUserWithPassword($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  createdAt: Date;$/", "language": "TypeScript", "kind": "property", "scope": "IUser", "scopeKind": "interface"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  email: string;$/", "language": "TypeScript", "kind": "property", "scope": "IUser", "scopeKind": "interface"}, {"_type": "tag", "name": "lastLoginAt", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  lastLoginAt?: Date;$/", "language": "TypeScript", "kind": "property", "scope": "IUser", "scopeKind": "interface"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  name?: string;$/", "language": "TypeScript", "kind": "property", "scope": "IUser", "scopeKind": "interface"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^    const ok = await bcrypt.compare(plain, this.passwordHash);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "passwordHash", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  const passwordHash = await bcrypt.hash(params.password, saltRounds);$/", "language": "TypeScript", "kind": "constant", "scope": "createUserWithPassword", "scopeKind": "function"}, {"_type": "tag", "name": "passwordHash", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  passwordHash: string;$/", "language": "TypeScript", "kind": "property", "scope": "IUser", "scopeKind": "interface"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  role: UserRole;$/", "language": "TypeScript", "kind": "property", "scope": "IUser", "scopeKind": "interface"}, {"_type": "tag", "name": "saltRounds", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  const saltRounds = 10;$/", "language": "TypeScript", "kind": "constant", "scope": "createUserWithPassword", "scopeKind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  updatedAt: Date;$/", "language": "TypeScript", "kind": "property", "scope": "IUser", "scopeKind": "interface"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/live-user-analytics-dashboard-182054-182063/backend_api/src/models/User.ts", "pattern": "/^  const user = new UserModel({$/", "language": "TypeScript", "kind": "constant", "scope": "createUserWithPassword", "scopeKind": "function"}], "hash": "af8fa202d54ae18e7d5a4f28be179be7", "format-version": 4, "code-base-name": "frontend_dashboard", "filename": "backend_api/src/models/User.ts", "fields": [{"name": "export interface IUser extends Document {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "createdAt: Date;", "scope": "IUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "email: string;", "scope": "IUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "lastLoginAt?: Date;", "scope": "IUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "name?: string;", "scope": "IUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "passwordHash: string;", "scope": "IUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "role: UserRole;", "scope": "IUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "updatedAt: Date;", "scope": "IUser", "scopeKind": "interface", "description": "unavailable"}]}